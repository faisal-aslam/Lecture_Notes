\documentclass[12pt,a4paper]{article}
\usepackage[a4paper,margin=1in]{geometry}
\usepackage{array}
\usepackage{booktabs}
\usepackage{hyperref}
\usepackage{setspace}
\usepackage{titlesec} % Keep this ONE loading here
\usepackage{amsfonts}
\usepackage{graphicx}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{caption}
\usepackage{multirow}
\usepackage{enumitem}
\usepackage{tcolorbox}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{tikz}
\usetikzlibrary{positioning}
\usepackage{float}
\usepackage{tabularx}
\usepackage{amsthm}
\usepackage{amsmath, amssymb}
\usepackage{framed}
\usepackage{color}
\usepackage{mathtools}
\usepackage{forest}
\usepackage{pgfplots}

% ============ SECTION FORMATTING ============
% Format section headings with "Lecture X:"
\titleformat{\section}
  {\normalfont\Large\bfseries}{\thesection:}{1em}{}
  
\titleformat{\subsection}
  {\normalfont\large\bfseries}{\thesubsection}{1em}{}
% ===========================================

% Define colors
\definecolor{shadecolor}{RGB}{240,240,255}
\definecolor{codegreen}{RGB}{0,128,0}
\definecolor{codeblue}{RGB}{0,0,255}
\definecolor{codered}{RGB}{220,20,60}
\definecolor{lectureblue}{RGB}{30, 60, 114}
\definecolor{lightblue}{RGB}{230, 240, 255}

% CRITICAL: Load tcolorbox libraries BEFORE defining boxes
\tcbuselibrary{breakable, skins}

% BREAKABLE Box environments - all can split across pages
\newtcolorbox{definitionbox}{
    colback=blue!5!white,
    colframe=blue!75!black,
    fonttitle=\bfseries,
    title=Definition,
    sharp corners,
    breakable, % ENABLES page breaking
    enhanced, % Better visual appearance when broken
    before upper={\parindent0pt},
    parbox=false, % Important for proper breaking
}

\newtcolorbox{examplebox}{
    colback=green!5!white,
    colframe=green!75!black,
    fonttitle=\bfseries,
    title=Example,
    sharp corners,
    breakable, % ENABLES page breaking
    enhanced, % Better visual appearance when broken
    before upper={\parindent0pt},
    parbox=false, % Important for proper breaking
}

\newtcolorbox{importantbox}{
    colback=red!5!white,
    colframe=red!75!black,
    fonttitle=\bfseries,
    title=Important,
    sharp corners,
    breakable, % ENABLES page breaking
    enhanced, % Better visual appearance when broken
    before upper={\parindent0pt},
    parbox=false, % Important for proper breaking
}

% Theorem environments (using amsthm, not tcolorbox)
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{proposition}[theorem]{Proposition}

% Tree node style for Huffman trees
\tikzset{
    huffman node/.style = {circle, draw=black, thick, fill=lightblue, minimum size=0.8cm},
    leaf node/.style = {rectangle, draw=black, thick, fill=green!20, minimum width=1.2cm, minimum height=0.8cm},
    edge label/.style = {midway, fill=white, inner sep=1pt}
}

% PGFPlots settings
\pgfplotsset{compat=1.18}

\lstset{
    basicstyle=\ttfamily\footnotesize,
    keywordstyle=\color{codeblue},
    commentstyle=\color{codegreen},
    stringstyle=\color{codered},
    numbers=left,
    numberstyle=\tiny\color{gray},
    stepnumber=1,
    numbersep=5pt,
    backgroundcolor=\color{white},
    frame=single,
    rulecolor=\color{black},
    tabsize=2,
    captionpos=b,
    breaklines=true,
    breakatwhitespace=false,
    showspaces=false,
    showstringspaces=false
}

\newcounter{exercise}[section]
\renewcommand{\theexercise}{\thesection.\arabic{exercise}}

\newtcolorbox{exercisebox}{
    colback=orange!5!white,
    colframe=orange!75!black,
    fonttitle=\bfseries,
    title={Exercise \theexercise},
    sharp corners,
    breakable, % ENABLES page breaking
    enhanced, % Better visual appearance when broken
    before upper={\refstepcounter{exercise}\parindent0pt},
    parbox=false, % Important for proper breaking
}

\setstretch{1.2}

% ============ CRITICAL: CHANGE THESE LINES ============
% For TOC: Just show numbers
\renewcommand{\thesection}{\arabic{section}}
\renewcommand{\thesubsection}{\arabic{section}.\arabic{subsection}}

% For document body headings: Show "Lecture X"
% Add this custom command to show "Lecture X" in headings
\makeatletter
\let\oldsection\section
\renewcommand{\section}{%
  \@ifstar{\@StarredSection}{\@NonStarredSection}%
}
\newcommand{\@StarredSection}[1]{%
  \oldsection*{#1}%
}
\newcommand{\@NonStarredSection}[1]{%
  \oldsection[#1]{Lecture \thesection: #1}%
}
\makeatother
% =====================================================

\begin{document}

\tableofcontents
\thispagestyle{empty} % Remove page number from TOC
\clearpage

\begin{center}
    {\LARGE \textbf{Data Compression}}\\[0.3em]
    {\Large \textbf{Lecture Notes}}\\[0.5em]
    \textbf{Dr. Faisal Aslam}\\[1em]
\end{center}

\input{what_is_compression_and_matrics}
\newpage
\input{theory_part_1}
\newpage
\input{entropy_coding}
\newpage
\input{source_modeling}
\newpage
\input{lempel-ziv}

\end{document}
